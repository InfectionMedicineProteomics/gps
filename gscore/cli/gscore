#!/usr/bin/env python3
import argparse
import sys

from gscore.cli.denoise import Denoise
from gscore.cli.score import Score
from gscore.cli.train import Train
from gscore.cli.export import Export
from gscore.cli.build import Build
from gscore.cli.combine import Combine
from gscore.cli.predict import Predict

if __name__ == '__main__':

    subcommands = []

    subcommands.extend(
        [
            Denoise(),
            Export(),
            Score(),
            Train(),
            Build(),
            Combine(),
            Predict()
        ]
    )

    parser = argparse.ArgumentParser()

    subparser = parser.add_subparsers(
        dest="subcommand",
        title="subcommands",
        description="CLI tools for scoring OSW files",
    )

    for subcommand in subcommands:
        subcommand.build_subparser(subparser)

    command = parser.parse_args()

    if command.subcommand:

        if len(sys.argv) == 2:

            parser.print_help()

        else:

            command.run(command)

    else:

        if len(sys.argv) == 1:

            parser.print_help()